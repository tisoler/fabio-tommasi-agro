<script>

    function buscarSubCombinaciones (digito, mapa) {
        const listaComb = [];
        const variantsForPosition = mapa.get(digito);
        for (let i = 0; i < variantsForPosition.length; i++) {
            const variacion = variantsForPosition[i];
            listaComb.push(variacion)
        }
        return listaComb;
    }
    
    function buscarCombinaciones (pin) {
        const mapa = new Map();
        mapa.set(1, [1, 2, 4]);
        mapa.set(2, [1, 2, 3, 5]);
        mapa.set(3, [2, 3, 6]);
        mapa.set(4, [1, 4, 5, 7]);
        mapa.set(5, [2, 4, 5, 6, 8]);
        mapa.set(6, [3, 5, 6, 9]);
        mapa.set(7, [4, 7, 8]);
        mapa.set(8, [0, 5, 7, 8, 9]);
        mapa.set(9, [6, 8, 9]);
        mapa.set(0, [0, 8]);

        let combinaciones = [''];

        for (digit of pin) {
            const variants = mapa.get(parseInt(digit));
            combinaciones = combinaciones.flatMap(c => variants.map(v => c + v));
        }

        return combinaciones;
    }

    console.log(buscarCombinaciones('1256'));


    function buscarCombinaciones1(pin) {
        const mapa = {
            1: [1, 2, 4],
            2: [1, 2, 3, 5],
            3: [2, 3, 6],
            4: [1, 4, 5, 7],
            5: [2, 4, 5, 6, 8],
            6: [3, 5, 6, 9],
            7: [4, 7, 8],
            8: [0, 5, 7, 8, 9],
            9: [6, 8, 9],
            0: [0, 8],
        };

        return [...pin].reduce((combinations, digit) => 
            combinations.flatMap(comb => 
                mapa[digit].map(v => comb + v)
            ), ['']
        );
    }

    console.log(buscarCombinaciones1('1256'));


    function ratings(N, ratings) {
        const dict = {};
        let bestDish = { id: Infinity, avg: 0 };

        ratings.forEach(rating => {
            const [id, score] = rating;
            let avg = 0;
            if (!bestDish[id]) {
                avg = score;
                bestDish[id] = {
                    id,
                    numberRatings: 1,
                    score,
                };
            } else {
                const numberRatings = bestDish[id].numberRatings + 1;
                const newScore = bestDish[id].score + score;
                avg = newScore / numberRatings;
                bestDish[id] = {
                    id,
                    numberRatings,
                    score: newScore,
                };
            }
            if (avg > bestDish.avg || avg === bestDish.avg && id < bestDish.id) {
                bestDish = { id, avg }
            }
        });

        return bestDish.id;
    };

    console.log(ratings(5, [[133, 2], [233, 3], [233, 4], [433, 5], [433, 4]]));
</script>